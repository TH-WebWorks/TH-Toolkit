<!-- Step 9: Project Handoff Details -->
<div class="form-step active">
    <!-- Step Header -->
    <div class="text-center mb-8">
        <h2 class="step-title text-3xl mb-2">Project Handoff Details</h2>
        <h3 class="text-xl text-text-muted mb-4">Information for our development team</h3>
        <p class="step-description max-w-2xl mx-auto">These details will help us prepare a comprehensive project package for our developers and ensure a smooth handoff process.</p>
    </div>
    
    <!-- Project Name -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-project-diagram text-primary"></i>
            Project Name <span class="text-error">*</span>
        </label>
        <p class="form-description text-sm text-text-muted mb-3">What would you like to call this project internally?</p>
        <input type="text" name="projectName" placeholder="Enter a project name (e.g., 'ABC Company Website')" 
               class="input-option w-full p-4 text-white transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/20" 
               required>
    </div>
    
    <!-- Target Completion Date -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-calendar-alt text-primary"></i>
            Target Completion Date <span class="text-error">*</span>
        </label>
        <p class="form-description text-sm text-text-muted mb-4">When would you like your website to be ready? (Typical projects take 2-6 weeks)</p>
        
        <!-- Quick Date Selection -->
        <div class="mb-6">
            <h4 class="section-label">Quick Selection:</h4>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
                <button type="button" class="quick-date-option py-3 px-4 rounded-lg flex flex-col items-center gap-1" data-weeks="2">
                    <span class="text-sm font-medium">2 Weeks</span>
                    <span class="text-xs text-text-muted" id="date-preview-2"></span>
                </button>
                <button type="button" class="quick-date-option py-3 px-4 rounded-lg flex flex-col items-center gap-1" data-weeks="4">
                    <span class="text-sm font-medium">1 Month</span>
                    <span class="text-xs text-text-muted" id="date-preview-4"></span>
                </button>
                <button type="button" class="quick-date-option py-3 px-4 rounded-lg flex flex-col items-center gap-1" data-weeks="8">
                    <span class="text-sm font-medium">2 Months</span>
                    <span class="text-xs text-text-muted" id="date-preview-8"></span>
                </button>
                <button type="button" class="quick-date-option py-3 px-4 rounded-lg flex flex-col items-center gap-1" data-weeks="12">
                    <span class="text-sm font-medium">3 Months</span>
                    <span class="text-xs text-text-muted" id="date-preview-12"></span>
                </button>
            </div>
        </div>
        
        <!-- Custom Date Input -->
        <div class="mb-4">
            <h4 class="section-label">Or choose a specific date:</h4>
            <input type="date" name="projectDeadline" id="projectDeadline"
                   class="date-input input-option w-full px-4 py-4 text-lg" 
                   required>
        </div>
        
        <!-- Selected Date Display -->
        <div id="selected-date-display" class="hidden mb-4 p-4 bg-primary/10 border border-primary/20 rounded-lg">
            <div class="flex items-center gap-2">
                <i class="fas fa-check-circle text-primary"></i>
                <span class="text-white font-medium">Target Date Selected:</span>
                <span id="selected-date-text" class="text-primary font-bold"></span>
            </div>
        </div>
        
        <div class="bg-amber-500/10 border border-amber-500/20 rounded-lg p-3">
            <div class="flex items-start gap-2">
                <i class="fas fa-lightbulb text-amber-400 mt-0.5 text-sm"></i>
                <p class="text-xs text-amber-200">
                    <strong>Pro Tip:</strong> Realistic timelines help ensure quality results. Rush jobs often compromise quality and may cost more.
                </p>
            </div>
        </div>
    </div>
    
    <!-- Developer Email -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-code text-primary"></i>
            Developer Email (Optional)
        </label>
        <p class="form-description text-sm text-text-muted mb-3">If you have a preferred developer or team to receive the handoff package</p>
        <input type="email" name="developerEmail" placeholder="developer@example.com" 
               class="input-option w-full p-4 text-white transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/20">
    </div>
    
    <!-- Project Assets & Resources -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-upload text-primary"></i>
            Project Assets & Resources
        </label>
        <div class="space-y-4">
            <!-- Upload Area Container -->
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-cloud-upload-alt"></i>
                    Upload Files & Folders
                </h4>
                <div class="section-content">
                
                <!-- Upload Area -->
                <div class="upload-area" 
                     onclick="triggerFileSelect()" 
                     ondragover="handleDragOver(event)" 
                     ondragleave="handleDragLeave(event)" 
                     ondrop="handleDrop(event)">
                    <input type="file" name="projectAssets" multiple accept=".png,.jpg,.jpeg,.gif,.svg,.pdf,.doc,.docx,.txt,.zip,.ai,.psd,.sketch,.fig,.mp4,.mov,.webp" 
                           style="display: none;" id="assetUpload" onchange="handleFileSelect(this.files)">
                    <input type="file" name="projectFolders" webkitdirectory multiple 
                           style="display: none;" id="folderUpload" onchange="handleFileSelect(this.files)">
                    
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    
                    <div class="upload-title">Drop files/folders here or click to browse</div>
                    <div class="upload-subtitle">Upload individual files or entire folders at once</div>
                    
                    <!-- Upload Mode Toggle -->
                    <div class="upload-mode-toggle">
                        <button type="button" onclick="setUploadMode('files')" id="filesModeBtn" 
                                class="upload-mode-btn upload-mode-active">
                            <i class="fas fa-file"></i>
                            <span>Files</span>
                        </button>
                        <button type="button" onclick="setUploadMode('folders')" id="foldersModeBtn" 
                                class="upload-mode-btn">
                            <i class="fas fa-folder"></i>
                            <span>Folders</span>
                        </button>
                    </div>
                    
                    <div class="upload-file-types">
                        <div class="file-type-item">
                            <i class="fas fa-image"></i>
                            <span>Images & Graphics</span>
                        </div>
                        <div class="file-type-item">
                            <i class="fas fa-file-alt"></i>
                            <span>Documents</span>
                        </div>
                        <div class="file-type-item">
                            <i class="fas fa-paint-brush"></i>
                            <span>Design Files</span>
                        </div>
                        <div class="file-type-item">
                            <i class="fas fa-video"></i>
                            <span>Videos</span>
                        </div>
                    </div>
                    
                    <div class="upload-limits">
                        Maximum 25MB per file â€¢ Unlimited files
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- Upload Progress -->
        <div id="uploadProgress" class="upload-progress-container" style="display: none;">
            <div class="upload-progress-bar-bg">
                <div id="progressBar" class="upload-progress-bar" style="width: 0%"></div>
            </div>
            <p class="upload-progress-text" id="progressText">Uploading files...</p>
        </div>

        <!-- File Summary -->
        <div id="fileSummary" class="file-summary-container" style="display: none;">
            <div class="file-summary-card">
                <div class="file-summary-header">
                    <h4 class="file-summary-title">
                        <i class="fas fa-folder-open"></i>
                        Project Assets
                    </h4>
                    <div class="file-summary-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="fileCount">0</div>
                            <div class="stat-label">Files</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value stat-size" id="totalSize">0 MB</div>
                            <div class="stat-label">Total Size</div>
                        </div>
                        <button type="button" onclick="window.clearAllFiles()" class="clear-all-btn">
                            <i class="fas fa-trash"></i>
                            <span>Clear All</span>
                        </button>
                    </div>
                </div>
                
                <!-- File Type Breakdown -->
                <div id="fileTypeBreakdown" class="file-type-breakdown">
                    <div class="file-type-stat">
                        <div class="file-type-icon image-icon"><i class="fas fa-image"></i></div>
                        <div class="file-type-count" id="imageCount">0</div>
                        <div class="file-type-label">Images</div>
                    </div>
                    <div class="file-type-stat">
                        <div class="file-type-icon document-icon"><i class="fas fa-file-alt"></i></div>
                        <div class="file-type-count" id="documentCount">0</div>
                        <div class="file-type-label">Documents</div>
                    </div>
                    <div class="file-type-stat">
                        <div class="file-type-icon design-icon"><i class="fas fa-paint-brush"></i></div>
                        <div class="file-type-count" id="designCount">0</div>
                        <div class="file-type-label">Design Files</div>
                    </div>
                    <div class="file-type-stat">
                        <div class="file-type-icon video-icon"><i class="fas fa-video"></i></div>
                        <div class="file-type-count" id="videoCount">0</div>
                        <div class="file-type-label">Videos/Other</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Uploaded Files -->
        <div id="uploadedFiles" class="hidden">            
            <!-- File Summary Display -->
            <div id="fileSummaryDisplay" class="hidden">
                <div class="file-display-container">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                        <!-- Image Files Summary -->
                        <div class="file-category-summary text-center p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg">
                            <i class="fas fa-image text-blue-400 text-xl mb-2"></i>
                            <div class="text-white font-medium" id="imageCounter">0</div>
                            <div class="text-xs text-text-muted">Images</div>
                        </div>
                        
                        <!-- Document Files Summary -->
                        <div class="file-category-summary text-center p-3 bg-green-500/10 border border-green-500/20 rounded-lg">
                            <i class="fas fa-file-alt text-green-400 text-xl mb-2"></i>
                            <div class="text-white font-medium" id="documentCounter">0</div>
                            <div class="text-xs text-text-muted">Documents</div>
                        </div>
                        
                        <!-- Design Files Summary -->
                        <div class="file-category-summary text-center p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg">
                            <i class="fas fa-paint-brush text-purple-400 text-xl mb-2"></i>
                            <div class="text-white font-medium" id="designCounter">0</div>
                            <div class="text-xs text-text-muted">Design Files</div>
                        </div>
                        
                        <!-- Other Files Summary -->
                        <div class="file-category-summary text-center p-3 bg-gray-500/10 border border-gray-500/20 rounded-lg">
                            <i class="fas fa-file text-gray-400 text-xl mb-2"></i>
                            <div class="text-white font-medium" id="otherCounter">0</div>
                            <div class="text-xs text-text-muted">Other Files</div>
                        </div>
                    </div>
                    
                    <!-- Total Files Summary -->
                    <div class="text-center mb-4">
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg">
                            <i class="fas fa-folder text-primary"></i>
                            <span class="text-white font-medium">Total Files: <span id="totalFileCount">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Technical Requirements -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-cogs text-primary"></i>
            Technical Requirements
        </label>
        <div class="space-y-4">
            <!-- Hosting & Domain -->
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-server"></i>
                    Hosting & Domain
                </h4>
                <div class="section-content">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="section-label">Do you have a domain?</label>
                            <select name="hasDomain" class="input-option w-full p-3 section-text">
                                <option value="yes">Yes, I have a domain</option>
                                <option value="no">No, need help purchasing one</option>
                                <option value="unsure">Not sure</option>
                            </select>
                        </div>
                        <div>
                            <label class="section-label">Domain name (if you have one)</label>
                            <input type="text" name="domainName" placeholder="example.com" class="input-option w-full p-3 section-text">
                        </div>
                    </div>
                    <div class="mt-3">
                        <label class="section-label">Hosting preference</label>
                        <select name="hostingPreference" class="input-option w-full p-3 section-text">
                            <option value="developer-choice">Let developer choose (recommended)</option>
                            <option value="existing">I have existing hosting</option>
                            <option value="specific">I prefer a specific provider</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Integrations -->
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-plug"></i>
                    Required Integrations
                </h4>
                <div class="section-content">
                    <div class="checkbox-grid">
                        <label>
                            <input type="checkbox" name="integrations" value="Google Analytics">
                            <span>Google Analytics</span>
                        </label>
                        <label>
                            <input type="checkbox" name="integrations" value="Email Marketing">
                            <span>Email Marketing</span>
                        </label>
                        <label>
                            <input type="checkbox" name="integrations" value="Social Media">
                            <span>Social Media Links</span>
                        </label>
                        <label>
                            <input type="checkbox" name="integrations" value="Payment Processing">
                            <span>Payment Processing</span>
                        </label>
                        <label>
                            <input type="checkbox" name="integrations" value="CRM">
                            <span>CRM Integration</span>
                        </label>
                        <label>
                            <input type="checkbox" name="integrations" value="Chat Widget">
                            <span>Live Chat Widget</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content & SEO -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-file-text text-primary"></i>
            Content & SEO Requirements
        </label>
        <div class="space-y-4">
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-edit"></i>
                    Content Responsibility
                </h4>
                <div class="section-content">
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="contentResponsibility" value="client">
                            <span>I will provide all content</span>
                        </label>
                        <label>
                            <input type="radio" name="contentResponsibility" value="developer">
                            <span>Developer creates placeholder content</span>
                        </label>
                        <label>
                            <input type="radio" name="contentResponsibility" value="mixed">
                            <span>Mixed approach</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-search"></i>
                    SEO & Performance
                </h4>
                <div class="section-content">
                    <div class="checkbox-grid">
                        <label>
                            <input type="checkbox" name="seoRequirements" value="Basic SEO">
                            <span>Basic SEO optimization</span>
                        </label>
                        <label>
                            <input type="checkbox" name="seoRequirements" value="Mobile Responsive">
                            <span>Mobile responsive design</span>
                        </label>
                        <label>
                            <input type="checkbox" name="seoRequirements" value="Fast Loading">
                            <span>Fast loading times</span>
                        </label>
                        <label>
                            <input type="checkbox" name="seoRequirements" value="SSL Certificate">
                            <span>SSL certificate setup</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Management -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-users text-primary"></i>
            Project Management & Communication
        </label>
        <div class="space-y-4">
            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-comments"></i>
                    Communication Preferences
                </h4>
                <div class="section-content">
                    <div class="checkbox-grid">
                        <label>
                            <input type="checkbox" name="communicationMethods" value="Fiverr Messages">
                            <span>Fiverr Messages</span>
                        </label>
                        <label>
                            <input type="checkbox" name="communicationMethods" value="Email">
                            <span>Email Updates</span>
                        </label>
                        <label>
                            <input type="checkbox" name="communicationMethods" value="Video Calls">
                            <span>Video Calls</span>
                        </label>
                        <label>
                            <input type="checkbox" name="communicationMethods" value="Progress Screenshots">
                            <span>Progress Screenshots</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="section-container">
                <h4 class="section-header">
                    <i class="fas fa-life-ring"></i>
                    Post-Launch Support
                </h4>
                <div class="section-content">
                    <select name="postLaunchSupport" class="input-option w-full p-3 section-text">
                        <option value="">Select support level</option>
                        <option value="none">No ongoing support</option>
                        <option value="basic">Basic bug fixes (30 days)</option>
                        <option value="extended">Extended support</option>
                        <option value="maintenance">Maintenance package</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Notes for Handoff -->
    <div class="form-group">
        <label class="form-label flex items-center gap-2">
            <i class="fas fa-sticky-note text-primary"></i>
            Additional Project Notes
        </label>
        <textarea name="handoffNotes" placeholder="Any additional requirements or special notes..." 
                  class="input-option w-full p-4 resize-none" 
                  rows="4"></textarea>
    </div>
    
    <!-- Navigation Buttons -->
    <div class="btn-group mt-12">
        <button type="button" class="btn btn-secondary" data-action="prev">
            <i class="fas fa-arrow-left mr-2"></i>Previous
        </button>
        <button type="button" class="btn btn-secondary btn-sm" data-action="reset">
            <i class="fas fa-refresh mr-2"></i>Start Over
        </button>
        <button type="button" class="btn btn-primary" data-action="next">
            Next<i class="fas fa-arrow-right ml-2"></i>
        </button>
    </div>
</div>

<script>
// Date picker functionality only - file upload is now handled globally in wizard.js
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced date picker functionality
    const dateInput = document.getElementById('projectDeadline');
    const selectedDateDisplay = document.getElementById('selected-date-display');
    const selectedDateText = document.getElementById('selected-date-text');
    
    // Set minimum date to today
    const today = new Date();
    const todayString = today.toISOString().split('T')[0];
    dateInput.setAttribute('min', todayString);
    
    // Initialize date previews for quick selection buttons
    function initializeDatePreviews() {
        const now = new Date();
        
        // Calculate dates based on weeks
        [2, 4, 8, 12].forEach(weeks => {
            const futureDate = new Date(now.getTime() + (weeks * 7 * 24 * 60 * 60 * 1000));
            const previewElement = document.getElementById(`date-preview-${weeks}`);
            if (previewElement) {
                previewElement.textContent = futureDate.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric' 
                });
            }
        });
    }
    
    // Quick date selection with enhanced feedback
    document.querySelectorAll('.quick-date-option').forEach(btn => {
        btn.addEventListener('click', function() {
            const weeks = parseInt(this.dataset.weeks);
            
            if (weeks) {
                const targetDate = new Date(today.getTime() + (weeks * 7 * 24 * 60 * 60 * 1000));
                
                // Update the date input
                dateInput.value = targetDate.toISOString().split('T')[0];
                
                // Clear previous selections
                document.querySelectorAll('.quick-date-option').forEach(b => {
                    b.classList.remove('selected');
                });
                
                // Highlight selected option
                this.classList.add('selected');
                
                // Update selected date display
                updateSelectedDateDisplay(targetDate);
            }
        });
    });
    
    // Handle manual date input changes
    dateInput.addEventListener('change', function() {
        if (this.value) {
            const selectedDate = new Date(this.value + 'T00:00:00');
            updateSelectedDateDisplay(selectedDate);
            
            // Clear quick selection highlights
            document.querySelectorAll('.quick-date-option').forEach(b => {
                b.classList.remove('selected');
            });
        }
    });
    
    // Update selected date display
    function updateSelectedDateDisplay(date) {
        if (selectedDateDisplay && selectedDateText) {
            selectedDateText.textContent = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            selectedDateDisplay.classList.remove('hidden');
        }
    }
    
    // Initialize date functionality
    initializeDatePreviews();

    // Image view toggle functions (still need these for UI)
    window.toggleImageView = function() {
        const grid = document.getElementById('imageGrid');
        const icon = document.getElementById('imageViewIcon');
        const button = icon?.parentElement;
        
        if (grid && grid.classList.contains('grid-cols-3')) {
            grid.className = 'grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2';
            if (icon) icon.className = 'fas fa-th-large';
            if (button) button.innerHTML = '<i class="fas fa-th-large" id="imageViewIcon"></i> Large View';
        } else if (grid) {
            grid.className = 'grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-2';
            if (icon) icon.className = 'fas fa-th';
            if (button) button.innerHTML = '<i class="fas fa-th" id="imageViewIcon"></i> Grid View';
        }
    };

    window.toggleDocumentView = function() {
        console.log('Document view toggle');
    };
});
</script>